@page "/bulletin"
@using BulletinBoard.DTOs
@using BulletinBoard.Services


<h3>BulletinPage</h3>
@if(_bulletin != null)
{
    <h1>@_bulletin.Description</h1>
}
else
{
    <h1>nie</h1>
}
@inherits MainComponent



@code {
    [Parameter]
    [SupplyParameterFromQuery]
    public long Group { get; set; }

    [Parameter]
    [SupplyParameterFromQuery]
    public Guid Bulletin { get; set; }

    [Inject]
    protected IBulletinService _bulletinService { get; set; }
    private BulletinInfoDTO _bulletin = default!;

    public async override Task SetParametersAsync(ParameterView parameters)
    {
        await base.SetParametersAsync(parameters);
        if (IsInGroup(Group))
        {
            _bulletin = await _bulletinService.GetBulletinAsyncCached(_user, Convert.ToUInt64(Group), Bulletin);
        }
        base.StateHasChanged();
    }

}
